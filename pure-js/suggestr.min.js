// Suggestr - the dead simple autocompleter
//
// Copyright (c) 2011, Honza Pokorny
// Suggestr may be freely distributed under the BSD license.
// https://github.com/honza/suggestr.js
(function(){var a=this,b=0,c={up:38,down:40,enter:13};a.suggestr=function(a,d){function e(){b=0,g.innerHTML=""}function f(a){var d=b,e;a==c.up?e=d-1:e=d+1;if(-1<e&&e<g.children.length){for(var f=0;f<g.children.length;f++){var h=g.children[f];h.style.list_style="none",h.style.backgroundColor="#fff"}g.children[e].style.backgroundColor="#ececec",b=e}}var g,h,i,j,k;g=document.getElementById("suggestr-div"),g||(g=document.createElement("div"),g.id="suggestr-div",g.style.width="200px",g.style.position="absolute"),a.parentNode.appendChild(g),a.onblur=function(b){try{a.parentElement.removeChild(g)}catch(b){}},a.onkeydown=function(d){if(d.keyCode==c.enter)return i=g.children[b].innerText,a.value=i,e(),d.preventDefault?d.preventDefault():d.returnValue=!1,d.stopPropagation&&d.stopPropagation(),d.cancelBubble&&(d.cancelBubble=!0),!1;if(d.keyCode==c.up||d.keyCode==c.down)return f(d.keyCode),d.preventDefault?d.preventDefault():d.returnValue=!1,d.stopPropagation&&d.stopPropagation(),d.cancelBubble&&(d.cancelBubble=!0),!1},a.onkeyup=function(b){if(b.keyCode==c.enter)return;if(b.keyCode==c.up||b.keyCode==c.down)return;g.innerHTML="",i=a.value.toLowerCase();if(!i.length)return;for(j=0;j<d.length;j++)if(d[j].toLowerCase().indexOf(i)>-1){k=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+i+")(?![^<>]*>)(?![^&;]+;)","gi");var f=d[j].replace(k,"<strong>$1</strong>"),h=document.createElement("li");h.innerHTML=f,h.style.listStyle="none",h.style.backgroundColor="#fff",h.onmouseover=function(){this.style.backgroundColor="#ececec"},h.onmouseout=function(){this.style.backgroundColor="#fff"},h.onclick=function(){a.value=this.innerText,e()},g.appendChild(h)}a.parentNode.appendChild(g),g.children.length>0&&(g.firstChild.style.listStyle="none",g.firstChild.style.backgroundColor="#ececec")}}})();